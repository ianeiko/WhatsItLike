function MainApp(e,t,n,r){if(n.place&&n.month){var i=n.place,s=n.month;document.documentElement.className="";updateNav(s);r.setProperty({month:s,place:i});t.get("data/"+i+".json").success(function(t){for(var n=0;n<t.length;n++)s==t[n].month&&(e.data=t[n])})}else{document.documentElement.className="map";r.setProperty({month:0,place:""});updateNav(0);loadMap()}}function MainNav(e,t,n){e.changeMonth=function(e){var r=n.getProperty(),i=document.getElementById("main-nav").getElementsByTagName("li"),s=i[e-1];r.place&&s.className!="disabled"&&t.path("/places/"+r.place+"/"+e)}}function updateNav(e){var t=document.getElementById("main-nav"),n=t.getElementsByTagName("li"),r=[3,8,12];t.setAttribute("data-active",e);for(var i=0;i<n.length;i++){var s=r.indexOf(i+1)>-1;s?n[i].className="":n[i].className="disabled"}}function loadMap(){var e=[{geometry:{type:"Point",coordinates:[103.8871694,22.3094655]},properties:{image:"http://upload.wikimedia.org/wikipedia/commons/1/1f/Sapa3.jpg",url:"#/places/bali/1",city:"Sa Pa, Vietnam"}},{geometry:{type:"Point",coordinates:[95.3542159,5.5640231]},properties:{image:"http://www.unlvasa.org/wp-content/uploads/2010/03/aceh_besar-batur_rahman.jpg",url:"#/places/bali/1",city:"Aceh, Indonesia"}},{geometry:{type:"Point",coordinates:[103.864403,13.36866]},properties:{image:"http://upload.wikimedia.org/wikipedia/commons/7/77/Siemreap.jpg",url:"#/places/bali/1",city:"Siem Reap, Cambodia"}},{geometry:{type:"Point",coordinates:[119.38749540042421,11.179478273369376]},properties:{image:"http://upload.wikimedia.org/wikipedia/commons/7/77/ElNido_Bay_Palawan.jpg",url:"#/places/bali/1",city:"El Nido, Palawan, Philippines"}},{geometry:{type:"Point",coordinates:[115.26004893465226,-8.458092963238881]},properties:{image:"http://inzumi.com/images/destinations/ID_Bali_Reiseziel_7.jpg",url:"#/places/bali/1",city:"Bali, Indonesia"}}],t=mapbox.map("map");t.addLayer(mapbox.layer().id("jneiku.map-cz9jmzy0"));var n=mapbox.markers.layer().features(e),r=mapbox.markers.interaction(n);t.addLayer(n);r.formatter(function(e){var t='<a href="'+e.properties.url+'">'+'<img src="'+e.properties.image+'"'+'width="300" height="200" >'+"<h2>"+e.properties.city+"</h2>"+"</a>";return t});t.centerzoom({lat:10.36866,lon:108.864403},5);t.ui.attribution.add().content('<a href="http://mapbox.com/about/maps">Terms &amp; Feedback</a>')}angular.module("whatsitlike",["whatsitlikeServices"]).config(["$routeProvider",function(e){e.when("/app",{templateUrl:"partials/map.html",controller:MainApp}).when("/places/:place/:month",{templateUrl:"partials/detail.html",controller:MainApp}).otherwise({redirectTo:"/app"})}]);angular.module("whatsitlikeServices",[]).service("sharedProperties",function(){var e={month:0,place:""};return{getProperty:function(){return e},setProperty:function(t){e=t}}});